# AutoWealth Scout AI â€” é¡¹ç›®åˆ†ææŠ¥å‘Š

## é¡¹ç›®æ¦‚è§ˆ

ä¸€æ¬¾åŸºäº **Vite + React + TypeScript** çš„ AI é©±åŠ¨å¸‚åœºæœºä¼šæ‰«æå™¨ï¼Œé€šè¿‡ **Gemini API** å®æ—¶å‘ç°è“æµ·å¸‚åœºå’Œè‡ªåŠ¨åŒ–èµšé’±æœºä¼šã€‚

```mermaid
graph LR
  A[ç”¨æˆ·è¾“å…¥/ç­›é€‰] --> B[Gemini API]
  B --> C[è¡Œä¸šå‘ç°]
  C --> D[ç»†åˆ†é¢†åŸŸ]
  D --> E[å…·ä½“æœºä¼š]
  E --> F[AI å¯¹è¯å’¨è¯¢]
  E --> G[ä»£ç è‡ªåŠ¨ç”Ÿæˆ]
  G --> H[Agent èµ„äº§åº“]
```

| ç»´åº¦ | ç°çŠ¶ |
|------|------|
| æ–‡ä»¶æ•° | 13 ä¸ªæºæ–‡ä»¶ (å« 6 ç»„ä»¶) |
| æ¡†æ¶ | Vite 6 + React 19 + TypeScript 5.8 |
| æ ·å¼ | Tailwind CDN (`cdn.tailwindcss.com`) |
| AI åç«¯ | Google Gemini (`gemini-3-flash-preview` / `gemini-3-pro-preview`) |
| æ•°æ®å¯è§†åŒ– | Recharts 3.7 (å·²å¼•å…¥ä½†æœªä½¿ç”¨) |
| æŒä¹…åŒ– | localStorage |

---

## ğŸ”´ å…³é”®é—®é¢˜ (éœ€ç«‹å³ä¿®å¤)

### 1. API Key å‰ç«¯æš´éœ² â€” å®‰å…¨é£é™©

> [!CAUTION]
> `process.env.API_KEY` é€šè¿‡ Vite `define` æ³¨å…¥ï¼Œæœ€ç»ˆä¼šè¢«ç¡¬ç¼–ç åˆ°æ‰“åŒ…äº§ç‰©ä¸­ï¼Œä»»ä½•äººæ‰“å¼€ DevTools å³å¯è·å–ä½ çš„ Gemini API Keyã€‚

**æ¯æ¬¡ API è°ƒç”¨éƒ½åœ¨å‰ç«¯ `new GoogleGenAI()`**ï¼š

```typescript
// services/geminiService.ts â€” æ¯ä¸ªå‡½æ•°éƒ½è¿™æ ·åš
const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
```

**å»ºè®®**ï¼šæ­å»ºä¸€ä¸ªè½»é‡åç«¯ä»£ç† (å¦‚ Express / Cloudflare Worker / Vercel Edge Function)ï¼Œå°† API Key ä¿å­˜åœ¨æœåŠ¡ç«¯ã€‚

---

### 2. ç¼ºå¤±çš„ `index.css` æ–‡ä»¶

[index.html](file:///d:/autowealth-scout-ai/index.html) ç¬¬ 54 è¡Œå¼•ç”¨äº† `<link rel="stylesheet" href="/index.css">`ï¼Œä½†è¯¥æ–‡ä»¶ **ä¸å­˜åœ¨**ï¼Œå¯¼è‡´ä¸€ä¸ª 404 è¯·æ±‚ã€‚è™½ç„¶ä¸å½±å“è¿è¡Œï¼Œä½†åº”åˆ é™¤å¼•ç”¨æˆ–åˆ›å»ºè¯¥æ–‡ä»¶ã€‚

---

### 3. [TrendChart](file:///d:/autowealth-scout-ai/components/TrendChart.tsx#20-84) ç»„ä»¶ä»æœªä½¿ç”¨

[components/TrendChart.tsx](file:///d:/autowealth-scout-ai/components/TrendChart.tsx) å·²å®Œæ•´å®ç° (86 è¡Œ)ï¼Œä¾èµ– Rechartsï¼Œä½†åœ¨æ•´ä¸ªé¡¹ç›®ä¸­æ²¡æœ‰è¢«ä»»ä½•æ–‡ä»¶å¼•å…¥ã€‚è¿™æ˜¯æ­»ä»£ç ã€‚

---

### 4. Import Map ä¸ npm ä¾èµ–é‡å¤

[index.html](file:///d:/autowealth-scout-ai/index.html) ä¸­å®šä¹‰äº† `importmap` ä» `esm.sh` åŠ è½½ React/Recharts/GenAIï¼Œä½† Vite å·²é€šè¿‡ `node_modules` å¤„ç†è¿™äº›ä¾èµ–ã€‚ä¸¤å¥—åŠ è½½æœºåˆ¶å¯èƒ½å†²çªï¼Œäº§ç”Ÿ **é‡å¤çš„ React å®ä¾‹**ï¼Œå¯¼è‡´ hooks æŠ¥é”™ã€‚

---

## ğŸŸ¡ æ¶æ„ä¸ä»£ç è´¨é‡æ”¹è¿›å»ºè®®

### 5. [App.tsx](file:///d:/autowealth-scout-ai/App.tsx) è¿‡äºè‡ƒè‚¿ (330 è¡Œå•æ–‡ä»¶)

å½“å‰ [App.tsx](file:///d:/autowealth-scout-ai/App.tsx) æ‰¿æ‹…äº†è¿‡å¤šèŒè´£ï¼š
- ç¿»è¯‘æ–‡æœ¬ (i18n)
- ç­›é€‰å™¨å®šä¹‰ä¸çŠ¶æ€ç®¡ç†
- 5+ ä¸ª async æ•°æ®è·å–å‡½æ•°
- å®Œæ•´çš„é¡µé¢å¸ƒå±€ä¸è·¯ç”±é€»è¾‘

**å»ºè®®æ‹†åˆ†ä¸º**ï¼š

| æ¨¡å— | æ–‡ä»¶ |
|------|------|
| å›½é™…åŒ– | `i18n/translations.ts` |
| ç­›é€‰å™¨å¸¸é‡ | `constants/filters.ts` |
| æ•°æ®è·å–é€»è¾‘ | `hooks/useDiscovery.ts` (è‡ªå®šä¹‰ Hook) |
| å¸ƒå±€éª¨æ¶ | `layouts/MainLayout.tsx` |
| å‘ç°é¡µ | `pages/ScoutPage.tsx` |

### 6. ç¿»è¯‘ç³»ç»Ÿç¡¬ç¼–ç ä¸”ä¸ç»Ÿä¸€

ç¿»è¯‘åˆ†å¸ƒåœ¨è‡³å°‘ **7 ä¸ªä¸åŒæ–‡ä»¶** ä¸­ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„ `const t = { ... }` å±€éƒ¨ç¿»è¯‘å¯¹è±¡ã€‚ä¸åˆ©äºç»´æŠ¤å’Œæ‰©å±•ã€‚

**å»ºè®®**ï¼šä½¿ç”¨é›†ä¸­å¼ i18n æ–¹æ¡ˆ (å¦‚ `react-intl` / `i18next`ï¼Œæˆ–è‡³å°‘æŠ½å–åˆ°ç»Ÿä¸€çš„ `translations.ts`)ã€‚

### 7. Gemini å®¢æˆ·ç«¯åå¤å®ä¾‹åŒ–

æ¯æ¬¡ API è°ƒç”¨éƒ½ä¼š `new GoogleGenAI({...})`ï¼Œåº”æ”¹ä¸ºå•ä¾‹æ¨¡å¼æˆ– module-level å®ä¾‹ï¼š

```diff
- export const fetchTopSectors = async (...) => {
-   const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
+ const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
+ export const fetchTopSectors = async (...) => {
```

### 8. æ— é”™è¯¯è¾¹ç•Œ (Error Boundary)

ä»»ä½•ç»„ä»¶çš„æ¸²æŸ“å¼‚å¸¸éƒ½ä¼šå¯¼è‡´æ•´ä¸ªåº”ç”¨ç™½å±ã€‚åº”åœ¨é¡¶å±‚å’Œå…³é”®å­æ ‘æ·»åŠ  React Error Boundaryã€‚

### 9. "è¿”å›ä¸Šä¸€çº§" åŠŸèƒ½ä¸å®Œæ•´

ç‚¹å‡»"è¿”å›ä¸Šä¸€çº§"åä»…æ‰§è¡Œ `setDiscoveryPath(prev => prev.slice(0, -1))` å’Œ `setResult(null)`ï¼Œä½† **ä¸ä¼šé‡æ–°åŠ è½½ä¸Šä¸€çº§çš„ nodes æ•°æ®**ï¼Œå¯¼è‡´ç”¨æˆ·çœ‹åˆ°ç©ºç™½æˆ–æ®‹ç•™çš„æ—§æ•°æ®ã€‚

### 10. localStorage æŒä¹…åŒ–ä¸å®Œæ•´

`savedAgents` ä» `localStorage` åˆå§‹åŒ–ï¼Œä½† **ä»æ²¡æœ‰å†™å›** `localStorage`ã€‚éœ€è¦åŠ ä¸€ä¸ª `useEffect` åŒæ­¥ï¼š

```typescript
useEffect(() => {
  localStorage.setItem('auto_wealth_agents', JSON.stringify(savedAgents));
}, [savedAgents]);
```

---

## ğŸŸ¢ åŠŸèƒ½å¢å¼ºå»ºè®®

### 11. æ·»åŠ éª¨æ¶å± (Skeleton) æ›¿ä»£ç©ºç™½åŠ è½½çŠ¶æ€

å½“å‰æ‰«æä¸­åªæœ‰æ—¥å¿—è¾“å‡ºï¼Œç½‘æ ¼åŒºåŸŸå®Œå…¨ç©ºç™½ã€‚å»ºè®®æ·»åŠ éª¨æ¶å±åŠ¨ç”»æå‡ç”¨æˆ·ä½“éªŒã€‚

### 12. å……åˆ†åˆ©ç”¨ [TrendChart](file:///d:/autowealth-scout-ai/components/TrendChart.tsx#20-84)

å·²ç»å®ç°çš„ Recharts å¯è§†åŒ–ç»„ä»¶å¯ä»¥åµŒå…¥åˆ°ï¼š
- ä¾§è¾¹æ  (æ›¿ä»£çº¯æ–‡æœ¬å®è§‚åˆ†æ)
- [OpportunityModal](file:///d:/autowealth-scout-ai/components/OpportunityModal.tsx#19-332) ä¸­å±•ç¤ºå¤šä¸ªæœºä¼šçš„å¯¹æ¯”
- æœç´¢ç»“æœä¸‹æ–¹ä½œä¸ºè¾…åŠ©ä¿¡æ¯

### 13. ç§»åŠ¨ç«¯å¯ç”¨æ€§ä¼˜åŒ–

- ä¾§è¾¹æ ç»ˆç«¯ (`<aside>`) åœ¨ `xl` ä»¥ä¸‹å®Œå…¨éšè— â†’ è€ƒè™‘åšæˆå¯æŠ˜å æŠ½å±‰
- å¯¼èˆªæ åœ¨ [md](file:///d:/autowealth-scout-ai/README.md) ä»¥ä¸‹éšè— â†’ å¢åŠ ç§»åŠ¨ç«¯æ±‰å ¡èœå•
- [OpportunityModal](file:///d:/autowealth-scout-ai/components/OpportunityModal.tsx#19-332) çš„åŒæ å¸ƒå±€åœ¨å°å±ä¸ŠæŒ¤å‹ä¸¥é‡

### 14. æ·»åŠ  URL è·¯ç”±

ç›®å‰æ‰€æœ‰çŠ¶æ€çº¯å†…å­˜ç®¡ç†ï¼Œåˆ·æ–°å³ä¸¢å¤±ã€‚å»ºè®®å¼•å…¥ `react-router` æˆ–è‡³å°‘ç”¨ URL search params ä¿å­˜å…³é”®çŠ¶æ€ã€‚

### 15. ä»£ç æ²™ç®±å¢å¼º

[SandboxView](file:///d:/autowealth-scout-ai/components/SandboxView.tsx#10-173) çš„ "è¿è¡Œ" æ˜¯çº¯æ¨¡æ‹Ÿï¼Œå¯è€ƒè™‘é›†æˆ WebContainers æˆ– Sandpack å®ç°çœŸå®ä»£ç è¿è¡Œã€‚

---

## ä¼˜å…ˆçº§æ€»ç»“

| ä¼˜å…ˆçº§ | æ”¹è¿›é¡¹ | ç±»å‹ |
|--------|--------|------|
| ğŸ”´ P0 | API Key åç«¯åŒ– | å®‰å…¨ |
| ğŸ”´ P0 | åˆ é™¤ import map æˆ– CDN é‡å¤åŠ è½½ | ç¨³å®šæ€§ |
| ğŸŸ¡ P1 | ä¿®å¤è¿”å›ä¸Šä¸€çº§çš„æ•°æ®æ¢å¤ | Bug |
| ğŸŸ¡ P1 | ä¿®å¤ localStorage åŒæ­¥ | Bug |
| ğŸŸ¡ P1 | åˆ é™¤ç¼ºå¤±çš„ `index.css` å¼•ç”¨ | æ¸…æ´ |
| ğŸŸ¡ P2 | æ‹†åˆ† [App.tsx](file:///d:/autowealth-scout-ai/App.tsx) / æŠ½å–è‡ªå®šä¹‰ Hooks | æ¶æ„ |
| ğŸŸ¡ P2 | é›†ä¸­åŒ–ç¿»è¯‘ç³»ç»Ÿ | å¯ç»´æŠ¤æ€§ |
| ğŸŸ¡ P2 | Gemini å®¢æˆ·ç«¯å•ä¾‹ | æ€§èƒ½ |
| ğŸŸ¢ P3 | éª¨æ¶å± / ç§»åŠ¨ç«¯ä¼˜åŒ– / è·¯ç”± | UX |
| ğŸŸ¢ P3 | åˆ©ç”¨ TrendChart / æ²™ç®±å¢å¼º | åŠŸèƒ½ |
